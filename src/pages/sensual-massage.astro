---
import Base from '../layouts/Base.astro';
import ListingCard from '../components/ListingCard.astro';
import CategoryNav from '../components/CategoryNav.astro';
import InternalLinks from '../components/InternalLinks.astro';
import OwnerCTA from '../components/OwnerCTA.astro';
import NetworkLinks from '../components/NetworkLinks.astro';
import GeoBanner from '../components/GeoBanner.astro';

// Safe fetch helper for fake category pages
async function safeFetch(url: string): Promise<any[]> {
    try {
        console.log('[fakeCat] Fetching:', url);
        const res = await fetch(url, { 
            headers: { 
                'Accept': 'application/json',
                'User-Agent': 'ErotikMaps-Satellite-Builder/1.0',
                'X-Satellite-Build': 'true'
            } 
        });
        if (!res.ok) return [];
        const ct = res.headers.get('content-type') || '';
        if (!ct.includes('application/json')) return [];
        const data = await res.json();
        return data.data || [];
    } catch (e) {
        console.error('[fakeCat] Fetch failed:', e);
        return [];
    }
}

// Fetch listings for this specific fake category
const apiUrl = 'https://www.erotikmaps.com/api/v1/satellite/listings?city=shanghai&category=sensual-massage&limit=50';
let listings = await safeFetch(apiUrl);

// If no specific listings, fallback to main category listings
if (listings.length === 0) {
    const fallbackUrl = 'https://www.erotikmaps.com/api/v1/satellite/listings?city=shanghai&category=erotic-massage&limit=30';
    listings = await safeFetch(fallbackUrl);
}

const canonicalUrl = 'https://eroticmassageshanghai.com/sensual-massage';
---

<Base 
    title="üíï Sensual Massage in Shanghai | Best Sensual Massage 2026"
    description="Discover the best Sensual Massage in Shanghai, China. Sensual Massage. Browse verified listings with photos, reviews & contact info. Find Sensual Massage near you!"
    canonical={canonicalUrl}
    image={listings.length > 0 && listings[0].thumbnail ? listings[0].thumbnail : 'https://erotikmaps.com/images/og-default.jpg'}
>
    <!-- Hero Section -->
    <section class="hero category-hero">
        <div class="container">
            <span class="hero-icon">üíï</span>
            <h1>Sensual Massage in Shanghai</h1>
            <p class="hero-subtitle">
                {listings.length > 0 
                    ? `Discover ${listings.length} verified Sensual Massage venues in Shanghai` 
                    : `Explore Sensual Massage in Shanghai`
                }
            </p>
        </div>
    </section>
    
    <!-- Category Navigation - Internal Links to other sub-types -->
    <CategoryNav city="Shanghai" currentCategory="sensual-massage" mainCategory="erotic-massage" />
    
    <!-- Intro Content - Rich SEO Content -->
    <section class="intro">
        <div class="container">
            <h2>About Sensual Massage in Shanghai</h2>
            <p>
                Looking for the best <strong>Sensual Massage</strong> in Shanghai? 
                Our curated directory features the top Sensual Massage venues in the Shanghai area. 
                Whether you're a local or visiting China, we help you discover quality 
                Sensual Massage with verified listings, photos, and direct contact information.
            </p>
            <p>
                Sensual Massage offers a unique entertainment experience. 
                In Shanghai, you'll find a variety of establishments offering Sensual Massage, 
                from exclusive venues to popular hotspots.
            </p>
        </div>
    </section>
    
    <!-- What to Expect - Unique content per category -->
    <section class="what-to-expect">
        <div class="container">
            <h2>What to Expect from Sensual Massage in Shanghai</h2>
            <div class="expect-grid">
                <div class="expect-card">
                    <span class="expect-icon">üè¢</span>
                    <h3>Professional Venues</h3>
                    <p>All listed Sensual Massage establishments in Shanghai are verified for authenticity and quality.</p>
                </div>
                <div class="expect-card">
                    <span class="expect-icon">üîí</span>
                    <h3>Privacy & Discretion</h3>
                    <p>Sensual Massage venues in Shanghai prioritize client privacy with discreet locations and confidential services.</p>
                </div>
                <div class="expect-card">
                    <span class="expect-icon">üíØ</span>
                    <h3>Quality Entertainment</h3>
                    <p>Expect top-tier entertainment and professional service at every Sensual Massage venue listed.</p>
                </div>
                <div class="expect-card">
                    <span class="expect-icon">üìç</span>
                    <h3>Prime Locations</h3>
                    <p>Find Sensual Massage venues across Shanghai, from vibrant nightlife districts to exclusive areas.</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- How to Choose - SEO Content -->
    <section class="how-to-choose">
        <div class="container">
            <h2>How to Choose the Best Sensual Massage in Shanghai</h2>
            <ol class="choose-steps">
                <li>
                    <strong>Browse our verified listings</strong> - All Sensual Massage venues on our directory have been reviewed for authenticity.
                </li>
                <li>
                    <strong>Check photos and services</strong> - Each listing includes photos, service descriptions, and contact details.
                </li>
                <li>
                    <strong>Look for Gold/Premium badges</strong> - These indicate venues that have been verified for exceptional quality.
                </li>
                <li>
                    <strong>Contact directly</strong> - Use WhatsApp, phone, or email to inquire about availability and pricing.
                </li>
                <li>
                    <strong>Read the FAQ section</strong> - Common questions about Sensual Massage in Shanghai are answered below.
                </li>
            </ol>
        </div>
    </section>
    
    <!-- Listings Grid -->
    <section class="listings" id="listings">
        <div class="container">
            <h2>Sensual Massage in Shanghai</h2>
            {listings.length > 0 ? (
                <div class="listings-grid">
                    {listings.map((listing: any) => (
                        <ListingCard listing={listing} />
                    ))}
                </div>
            ) : (
                <div class="no-listings">
                    <p>No specific Sensual Massage venues found in Shanghai yet.</p>
                    <p>
                        <a href="/" class="btn-primary">Browse All Erotic Massage Venues ‚Üí</a>
                    </p>
                    <p class="cta-text">
                        Own a Sensual Massage venue in Shanghai? 
                        <a href="https://gopremium.app/create-listing" rel="nofollow" title="Add your venue">
                            List it for FREE
                        </a>!
                    </p>
                </div>
            )}
        </div>
    </section>
    
    <!-- GeoBanner for category pages -->
    <div class="category-banner-slot">
        <div class="container">
            <GeoBanner />
        </div>
    </div>
    
    <!-- Auto-generated FAQ for Category Pages -->
    <section class="category-faq" id="faq">
        <div class="container">
            <h2>‚ùì Frequently Asked Questions about Sensual Massage in Shanghai</h2>
            <div class="faq-grid">
                <div class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                    <h3 itemprop="name">What is Sensual Massage?</h3>
                    <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                        <p itemprop="text">Sensual Massage offers Sensual Massage. In Shanghai, you can find various establishments offering authentic Sensual Massage experiences with professional staff and quality service.</p>
                    </div>
                </div>
                <div class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                    <h3 itemprop="name">How much does Sensual Massage cost in Shanghai?</h3>
                    <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                        <p itemprop="text">Prices for Sensual Massage in Shanghai vary depending on the venue and services offered. We recommend contacting individual venues directly for current pricing. Look for Gold and Premium listings for verified quality establishments.</p>
                    </div>
                </div>
                <div class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                    <h3 itemprop="name">How do I find the best Sensual Massage in Shanghai?</h3>
                    <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                        <p itemprop="text">Browse our directory of Sensual Massage venues in Shanghai, select a venue that interests you, and contact them directly via WhatsApp, phone, or email. Check photos, reviews, and look for Gold/Premium badges for top-rated venues.</p>
                    </div>
                </div>
                <div class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                    <h3 itemprop="name">Are the Sensual Massage venues in Shanghai verified?</h3>
                    <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                        <p itemprop="text">All venues listed on our directory have been reviewed for authenticity. Gold badge venues have been verified for exceptional quality, while Premium listings indicate verified professional establishments.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Related Categories - Smart Internal Links -->
    <section class="related-cats">
        <div class="container">
            <h2>Explore Other Massage Types in Shanghai</h2>
            <div class="related-grid">
                <a href="/" class="related-link main">üè† All Erotic Massage</a>
                <a href="/nuru-massage" class="related-link">üíÜ Nuru Massage</a>
                <a href="/tantric-massage" class="related-link">üïâÔ∏è Tantric Massage</a>
                <a href="/body-to-body-massage" class="related-link">‚ú® Body to Body</a>
                <a href="/sensual-massage" class="related-link">üíï Sensual Massage</a>
                <a href="/happy-ending-massage" class="related-link">üòä Happy Ending</a>
                <a href="/adult-massage" class="related-link">üîû Adult Massage</a>
            </div>
            <p class="more-link">
                Discover more <a href="https://erotikmaps.com/sensual-massage" title="Sensual Massage worldwide">Sensual Massage venues worldwide</a> on ErotikMaps
            </p>
        </div>
    </section>
    
    <!-- Network Links - Links to other satellite sites -->
    <NetworkLinks currentCity="Shanghai" currentCountry="China" category="erotic-massage" />
    
    <!-- Internal Links -->
    <InternalLinks city="Shanghai" country="China" category="Sensual Massage" />
    
    <!-- Owner CTA -->
    <OwnerCTA city="Shanghai" country="China" category="Sensual Massage" />
    
    <!-- Schema.org -->
    <script type="application/ld+json" set:html={JSON.stringify({
        "@context": "https://schema.org",
        "@type": "CollectionPage",
        "name": "Sensual Massage in Shanghai",
        "description": "Directory of Sensual Massage venues in Shanghai, China",
        "url": canonicalUrl,
        "isPartOf": {
            "@type": "WebSite",
            "name": "Shanghai Erotic massage",
            "url": "https://eroticmassageshanghai.com"
        },
        "breadcrumb": {
            "@type": "BreadcrumbList",
            "itemListElement": [
                { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://eroticmassageshanghai.com" },
                { "@type": "ListItem", "position": 2, "name": "Sensual Massage", "item": canonicalUrl }
            ]
        }
    })}></script>
    
    <!-- Sticky CTA Footer for Live Cams -->
    <a href="https://erotiklive.net/" target="_blank" rel="nofollow noopener" class="live-cta-sticky">
        <span class="live-dot"></span>
        <span class="live-text">Watch Girls Online</span>
    </a>
</Base>

<style>
    /* Sticky Live CTA Footer */
    .live-cta-sticky {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 9999;
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 16px 32px;
        background: linear-gradient(135deg, #ec4899 0%, #f43f5e 100%);
        color: white;
        font-weight: 700;
        font-size: 1.05rem;
        border-radius: 50px;
        text-decoration: none;
        box-shadow: 
            0 8px 30px rgba(236, 72, 153, 0.5),
            0 4px 15px rgba(0, 0, 0, 0.2);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        animation: pulseGlow 2s infinite;
    }
    
    .live-cta-sticky:hover {
        transform: translateX(-50%) translateY(-4px) scale(1.02);
        box-shadow: 
            0 12px 40px rgba(236, 72, 153, 0.6),
            0 6px 20px rgba(0, 0, 0, 0.25);
    }
    
    .live-dot {
        width: 12px;
        height: 12px;
        background: #22c55e;
        border-radius: 50%;
        animation: pulseDot 1.5s infinite;
        box-shadow: 0 0 10px rgba(34, 197, 94, 0.8);
    }
    
    .live-text {
        letter-spacing: 0.3px;
    }
    
    @keyframes pulseGlow {
        0%, 100% { box-shadow: 0 8px 30px rgba(236, 72, 153, 0.5), 0 4px 15px rgba(0, 0, 0, 0.2); }
        50% { box-shadow: 0 8px 35px rgba(236, 72, 153, 0.65), 0 4px 18px rgba(0, 0, 0, 0.25); }
    }
    
    @keyframes pulseDot {
        0%, 100% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.2); opacity: 0.8; }
    }
    
    @media (max-width: 600px) {
        .live-cta-sticky {
            bottom: 15px;
            padding: 14px 24px;
            font-size: 0.95rem;
        }
    }
    
    .category-hero {
        text-align: center;
    }
    .hero-icon {
        font-size: 4rem;
        display: block;
        margin-bottom: 15px;
    }
    
    /* What to Expect Section */
    .what-to-expect {
        padding: 60px 0;
        background: var(--card-bg);
    }
    .what-to-expect h2 {
        text-align: center;
        margin-bottom: 40px;
    }
    .expect-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 24px;
    }
    .expect-card {
        background: var(--bg);
        padding: 30px 24px;
        border-radius: 16px;
        text-align: center;
    }
    .expect-icon {
        font-size: 2.5rem;
        display: block;
        margin-bottom: 16px;
    }
    .expect-card h3 {
        font-size: 1.1rem;
        margin-bottom: 10px;
        color: var(--text);
    }
    .expect-card p {
        font-size: 0.9rem;
        color: var(--text-light);
        line-height: 1.6;
    }
    @media (max-width: 900px) {
        .expect-grid { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 500px) {
        .expect-grid { grid-template-columns: 1fr; }
    }
    
    /* Category FAQ Section */
    .category-faq {
        padding: 60px 0;
        background: var(--bg);
    }
    .category-faq h2 {
        text-align: center;
        margin-bottom: 40px;
    }
    .faq-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 24px;
        max-width: 1000px;
        margin: 0 auto;
    }
    .category-faq .faq-item {
        background: var(--card-bg);
        padding: 24px;
        border-radius: 16px;
        border-left: 4px solid var(--primary);
    }
    .category-faq .faq-item h3 {
        font-size: 1rem;
        margin-bottom: 12px;
        color: var(--text);
    }
    .category-faq .faq-item p {
        font-size: 0.9rem;
        color: var(--text-light);
        line-height: 1.7;
        margin: 0;
    }
    @media (max-width: 768px) {
        .faq-grid { grid-template-columns: 1fr; }
    }
    
    /* How to Choose Section */
    .how-to-choose {
        padding: 60px 0;
    }
    .how-to-choose h2 {
        text-align: center;
        margin-bottom: 40px;
    }
    .choose-steps {
        max-width: 700px;
        margin: 0 auto;
        padding-left: 0;
        list-style: none;
        counter-reset: step;
    }
    .choose-steps li {
        counter-increment: step;
        position: relative;
        padding: 20px 20px 20px 70px;
        margin-bottom: 16px;
        background: var(--card-bg);
        border-radius: 12px;
        line-height: 1.6;
    }
    .choose-steps li::before {
        content: counter(step);
        position: absolute;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        width: 36px;
        height: 36px;
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 1rem;
    }
    .choose-steps li strong {
        color: var(--text);
    }
    
    .no-listings {
        text-align: center;
        padding: 50px 20px;
        background: var(--card-bg);
        border-radius: 12px;
    }
    .no-listings p {
        margin-bottom: 15px;
    }
    .cta-text {
        font-size: 14px;
        color: var(--text-light);
    }
    .related-cats {
        padding: 50px 0;
        background: var(--card-bg);
    }
    .related-cats h2 {
        text-align: center;
        margin-bottom: 25px;
    }
    .related-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        justify-content: center;
        margin-bottom: 25px;
    }
    .related-link {
        padding: 12px 20px;
        background: var(--bg);
        border-radius: 8px;
        font-size: 14px;
        color: var(--text);
        transition: all 0.2s;
    }
    .related-link:hover {
        background: var(--primary);
        color: white;
    }
    .related-link.main {
        background: var(--primary);
        color: white;
    }
    .more-link {
        text-align: center;
        font-size: 14px;
        color: var(--text-light);
    }
    .more-link a {
        color: var(--primary);
    }
</style>